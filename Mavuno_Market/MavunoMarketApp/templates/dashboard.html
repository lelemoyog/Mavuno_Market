{% extends 'index.html' %}
{% load static %}
{% block title %}welcome{% endblock %}
{% block content %}

<style>
    .mb-5 {
        color: #d2e3c3;
    }
</style>


<!-- Hero Start -->
<div class="container-fluid py-5 mb-5 hero-header">

    <div class="container py-5">

        <div class="row">

            <!-- Notifications Icon -->
            <div class="col-md-6 mb-4">
                <i class="bi bi-bell fs-3 text-primary" role="button" data-bs-toggle="modal"
                    data-bs-target="#notificationsModal"></i>
            </div>


            <!-- Notifications Modal -->
            <div class="modal fade" id="notificationsModal" tabindex="-1" aria-labelledby="notificationsModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="notificationsModalLabel">Notifications</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <ul class="list-group">
                                <li class="list-group-item">Eugene Obunde a vendor, has made an order on 20kg of kamande</li>
                                <li class="list-group-item">Niron has made payment for 10kg of kamande - KSH 3000 </li>
                                <li class="list-group-item">Best time for selling kamande is on july, then the demand is more than supply hence leading to better profits</li>
                            </ul>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-12 mb-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="m-0">Market & Customer Insights</h5>
                    </div>
                    <div class="card-body">
                        <!-- Navigation Tabs -->
                        <ul class="nav nav-tabs" id="marketTabs" role="tablist">
                            <li class="nav-item">
                                <button class="nav-link active" id="bestSelling-tab" data-bs-toggle="tab" data-bs-target="#bestSelling" type="button" role="tab">
                                    Best-Selling Products
                                </button>
                            </li>
                            <li class="nav-item">
                                <button class="nav-link" id="topBuyers-tab" data-bs-toggle="tab" data-bs-target="#topBuyers" type="button" role="tab">
                                    Top Buyers
                                </button>
                            </li>
                            <li class="nav-item">
                                <button class="nav-link" id="marketTrends-tab" data-bs-toggle="tab" data-bs-target="#marketTrends" type="button" role="tab">
                                    Market Trends
                                </button>
                            </li>
                        </ul>
            
                        <!-- Tab Content -->
                        <div class="tab-content mt-3" id="marketTabsContent">
                            <!-- Best-Selling Products -->
                            <div class="tab-pane fade show active" id="bestSelling" role="tabpanel">
                                <ul class="list-group" id="bestSellingProducts">
                                    <li class="list-group-item">Loading...</li>
                                </ul>
                            </div>
            
                            <!-- Top Buyers -->
                            <div class="tab-pane fade" id="topBuyers" role="tabpanel">
                                <ul class="list-group" id="topBuyersList">
                                    <li class="list-group-item">Loading...</li>
                                </ul>
                            </div>
            
                            <!-- Market Prices & Demand -->
                            <div class="tab-pane fade" id="marketTrends" role="tabpanel">
                                <ul class="list-group" id="marketTrendsList">
                                    <li class="list-group-item">Fetching data...</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            




            <!-- Total Revenue -->
            <div class="col-12 mb-4">
                <div class="card">
                    <div class="row row-bordered g-0">
                        <div class="col">
                            <h5 class="card-header m-0 me-2 pb-3">Total Revenue</h5>
                            <div id="totalRevenueChart" class="px-2"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!--/ Total Revenue -->

            <!-- Order Statistics -->
            <div class="col-md-6 mb-4 ">
                <div class="card h-100">
                    <div class="card-header d-flex align-items-center justify-content-between pb-0">
                        <div class="card-title mb-0">
                            <h5 class="m-0 me-2">Order Statistics</h5>
                        </div>
                        <div class="dropdown">
                            <button class="btn p-0" type="button" id="orederStatistics" data-bs-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">
                                <i class="bx bx-dots-vertical-rounded"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-end" aria-labelledby="orederStatistics">
                                <a class="dropdown-item" href="javascript:void(0);">Select All</a>
                                <a class="dropdown-item" href="javascript:void(0);">Refresh</a>
                                <a class="dropdown-item" href="javascript:void(0);">Share</a>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div class="d-flex flex-column align-items-center gap-1">
                                <h2 class="mb-2" id="compltorders">8</h2>
                                <span>Total completed Orders</span>
                            </div>
                            <div id="orderStatisticsChart"></div>
                        </div>
                        <ul class="p-0 m-0">
                            <li class="d-flex mb-4 pb-1">
                                <div class="avatar flex-shrink-0 me-3">
                                    <span class="avatar-initial rounded bg-label-primary"><i
                                            class="bx bx-mobile-alt"></i></span>
                                </div>
                                <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                                    <div class="me-2">
                                        <h6 class="mb-0">Vegetables</h6>
                                        <small class="text-muted" id="vegys">Tomatoes, Kales, onions</small>
                                    </div>
                                    <div class="user-progress">
                                        <small class="fw-semibold" id="pvegys">82.5k</small>
                                    </div>
                                </div>
                            </li>
                            <li class="d-flex mb-4 pb-1">
                                <div class="avatar flex-shrink-0 me-3">
                                    <span class="avatar-initial rounded bg-label-success"><i
                                            class="bx bx-closet"></i></span>
                                </div>
                                <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                                    <div class="me-2">
                                        <h6 class="mb-0">Fruits</h6>
                                        <small class="text-muted" id="fruty">Oranges, Mangoes, Bannas</small>
                                    </div>
                                    <div class="user-progress">
                                        <small class="fw-semibold" id="pfruty">23.8k</small>
                                    </div>
                                </div>
                            </li>
                            <li class="d-flex mb-4 pb-1">
                                <div class="avatar flex-shrink-0 me-3">
                                    <span class="avatar-initial rounded bg-label-info"><i
                                            class="bx bx-home-alt"></i></span>
                                </div>
                                <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                                    <div class="me-2">
                                        <h6 class="mb-0">Cereals</h6>
                                        <small class="text-muted" id="cerealy">Maize, Beans</small>
                                    </div>
                                    <div class="user-progress">
                                        <small class="fw-semibold" id="pcereraly">849k</small>
                                    </div>
                                </div>
                            </li>
                            <li class="d-flex">
                                <div class="avatar flex-shrink-0 me-3">
                                    <span class="avatar-initial rounded bg-label-secondary"><i
                                            class="bx bx-football"></i></span>
                                </div>

                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--/ Order Statistics -->
            <div class="col">
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="d-flex justify-content-between flex-sm-row flex-column gap-3">

                            <div class="card-title">
                                <h5 class="text-nowrap mb-2">Profile Engagement</h5>
                                <!-- <span class="badge bg-label-warning rounded-pill">Year 2021</span> -->
                            </div>

                        </div>
                        <div id="profileReportChart"></div>

                    </div>
                </div>
                <div class="card">
                    <div class="d-flex">
                        <div class="card-body">
                            <div class="card-title d-flex align-items-start justify-content-between">
                                <div class="avatar flex-shrink-0">
                                    <img src="{% static 'img/mpesa.png' %}" alt="M-pesa" class="rounded" />
                                </div>
                                <div class="dropdown">
                                    <button class="btn p-0" type="button" id="cardOpt6" data-bs-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false">
                                        <i class="bx bx-dots-vertical-rounded"></i>
                                    </button>
                                    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cardOpt6">
                                        <a class="dropdown-item" href="javascript:void(0);">View More</a>
                                        <a class="dropdown-item" href="javascript:void(0);">Delete</a>
                                    </div>
                                </div>
                            </div>
                            <span>Sales</span>
                            <h3 class="card-title text-nowrap mb-1" id="totalMoney"></h3>
                            <!-- <small class="text-success fw-semibold" id="growthnumber"><i class="bx bx-up-arrow-alt"></i> +28.42%</small> -->
                        </div>
                        <!-- <div class="card-body">
                            <div class="card-title d-flex align-items-start justify-content-between">
                                <div class="avatar flex-shrink-0">
                                    <img src="{% static 'img/bank-card.png' %}" alt="Credit Card" class="rounded" />
                                </div>
                                <div class="dropdown">
                                    <button class="btn p-0" type="button" id="cardOpt6" data-bs-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false">
                                        <i class="bx bx-dots-vertical-rounded"></i>
                                    </button>
                                    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cardOpt6">
                                        <a class="dropdown-item" href="javascript:void(0);">View More</a>
                                        <a class="dropdown-item" href="javascript:void(0);">Delete</a>
                                    </div>
                                </div>
                            </div>
                            <span>Sales</span>
                            <h3 class="card-title text-nowrap mb-1">$4,679</h3>
                            <small class="text-success fw-semibold"><i class="bx bx-up-arrow-alt"></i> +28.42%</small>
                        </div> -->
                    </div>
                </div>
            </div>

            <!-- Cart Page Start -->
            <div class="container-fluid py-0 pt-5">
                <div class="container py-0 px-0">
                    <div style="display:none;" id="myAlert3">
                        <div class="alert alert-success d-flex align-items-center collapse" role="alert"
                            style=" float: right;">
                            <svg class="bi flex-shrink-0 me-2" width="50" height="50" role="img" aria-label="Success:">
                                <use xlink:href="#check-circle-fill" />
                            </svg>
                            <div id="succ">
                                Order successfully placed
                            </div>
                        </div>
                    </div>
                    <div style="display:none;" id="myAlert4">
                        <div class="alert alert-success d-flex align-items-center collapse" role="alert"
                            style=" float: right;">
                            <svg class="bi flex-shrink-0 me-2" width="50" height="50" role="img" aria-label="Success:">
                                <use xlink:href="#check-circle-fill" />
                            </svg>
                            <div>
                                Product successfully Aproved
                            </div>
                        </div>
                    </div>
                    <div class="table-responsive" style="color: #00806c;" id="">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">Products</th>
                                    <th scope="col">Name</th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Quantity</th>
                                    <th scope="col">Total</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Handle</th>
                                </tr>
                            </thead>
                            <tbody id="cartHolder2">

                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
            <!-- Cart Page End -->
        </div>
    </div>
</div>
<!-- Hero End -->



<!-- Fruits Shop Start-->
<div class="container-fluid fruite py-5" style="display: none;">
    <div class="container py-5">
        <div class="tab-class text-center">
            <div class="row g-4">
                <div class="col-lg-4 text-start">
                    <h1>My Products</h1>
                </div>
                <div class="col-lg-8 text-end">
                    <ul class="nav nav-pills d-inline-flex text-center mb-5">
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill active" data-bs-toggle="pill" href="#tab-1">
                                <span class="text-dark" style="width: 130px;">All Products</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-3">
                                <span class="text-dark" style="width: 130px;">Fruits</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-4">
                                <span class="text-dark" style="width: 130px;">Vegetables</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-5">
                                <span class="text-dark" style="width: 130px;">Cereals</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="tab-content">
                <div id="tab-1" class="tab-pane fade show p-0 active">
                    <div class="row g-4">
                        <div class="col-lg-12">
                            <div class="row g-4" id="productHolder">
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab-2" class="tab-pane fade show p-0">
                    <div class="row g-4">
                        <div class="col-lg-12">
                            <div class="row g-4">
                                <div class="col-md-6 col-lg-4 col-xl-3">
                                    <div class="rounded position-relative fruite-item">
                                        <div class="fruite-img">
                                            <img src="{% static 'img/fruite-item-5.jpg' %}"
                                                class="img-fluid w-100 rounded-top" alt="">
                                        </div>
                                        <div class="text-white bg-secondary px-3 py-1 rounded position-absolute"
                                            style="top: 10px; left: 10px;">Fruits</div>
                                        <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                                            <h4>Grapes</h4>

                                            <div class="d-flex justify-content-between flex-lg-wrap">
                                                <p class="text-dark fs-5 fw-bold mb-0">Ksh 100 / kg</p>
                                                <a href="#"
                                                    class="btn border border-secondary rounded-pill px-3 text-primary"><i
                                                        class="fa fa-shopping-bag me-2 text-primary"></i> Add to
                                                    cart</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 col-lg-4 col-xl-3">
                                    <div class="rounded position-relative fruite-item">
                                        <div class="fruite-img">
                                            <img src="{% static 'img/fruite-item-2.jpg' %}"
                                                class="img-fluid w-100 rounded-top" alt="">
                                        </div>
                                        <div class="text-white bg-secondary px-3 py-1 rounded position-absolute"
                                            style="top: 10px; left: 10px;">Fruits</div>
                                        <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                                            <h4>Raspberries</h4>
                                            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit sed do eiusmod te
                                                incididunt</p>
                                            <div class="d-flex justify-content-between flex-lg-wrap">
                                                <p class="text-dark fs-5 fw-bold mb-0">$4.99 / kg</p>
                                                <a href="#"
                                                    class="btn border border-secondary rounded-pill px-3 text-primary"><i
                                                        class="fa fa-shopping-bag me-2 text-primary"></i> Add to
                                                    cart</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="tab-3" class="tab-pane fade show p-0">
                    <div class="row g-4">
                        <div class="col-lg-12">
                            <div class="row g-4" id="productHolder2">
                                <!-- <div class="col-md-6 col-lg-4 col-xl-3">
                                        <div class="rounded position-relative fruite-item">
                                            <div class="fruite-img">
                                                <img src="{% static 'img/fruite-item-1.jpg' %}" class="img-fluid w-100 rounded-top" alt="">
                                            </div>
                                            <div class="text-white bg-secondary px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px;">Fruits</div>
                                            <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                                                <h4>Oranges</h4>
                                                
                                                <div class="d-flex justify-content-between flex-lg-wrap">
                                                    <p class="text-dark fs-5 fw-bold mb-0">Ksh 150 / kg</p>
                                                    <a href="#" class="btn border border-secondary rounded-pill px-3 text-primary"><i class="fa fa-shopping-bag me-2 text-primary"></i> View Description</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-lg-4 col-xl-3">
                                        <div class="rounded position-relative fruite-item">
                                            <div class="fruite-img">
                                                <img src="{% static 'img/fruite-item-6.jpg' %}" class="img-fluid w-100 rounded-top" alt="">
                                            </div>
                                            <div class="text-white bg-secondary px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px;">Fruits</div>
                                            <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                                                <h4>Apple</h4>
                                               
                                                <div class="d-flex justify-content-between flex-lg-wrap">
                                                    <p class="text-dark fs-5 fw-bold mb-0">Ksh 200</p>
                                                    <a href="#" class="btn border border-secondary rounded-pill px-3 text-primary"><i class="fa fa-shopping-bag me-2 text-primary"></i> View Description</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div> -->
                            </div>
                        </div>
                    </div>
                </div>
                <div id="tab-4" class="tab-pane fade show p-0">
                    <div class="row g-4">
                        <div class="col-lg-12">
                            <div class="row g-4" id="productHolder3">
                                <!-- <div class="col-md-6 col-lg-4 col-xl-3">
                                        <div class="rounded position-relative fruite-item">
                                            <div class="fruite-img">
                                                <img src="{% static 'img/broccoli-new.jpg' %}" class="img-fluid w-100 rounded-top" alt="">
                                            </div>
                                            <div class="text-white bg-secondary px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px;">Vegetables</div>
                                            <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                                                <h4>Broccoli</h4>
                                              
                                                <div class="d-flex justify-content-between flex-lg-wrap">
                                                    <p class="text-dark fs-5 fw-bold mb-0">Ksh 200 / kg</p>
                                                    <a href="#" class="btn border border-secondary rounded-pill px-3 text-primary"><i class="fa fa-shopping-bag me-2 text-primary"></i> View Description</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-lg-4 col-xl-3">
                                        <div class="rounded position-relative fruite-item">
                                            <div class="fruite-img">
                                                <img src="{% static 'img/plantain-new.jpg' %}" class="img-fluid w-100 rounded-top" alt="">
                                            </div>
                                            <div class="text-white bg-secondary px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px;">Vegetables</div>
                                            <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                                                <h4>Plantain</h4>
                                                <div class="d-flex justify-content-between flex-lg-wrap">
                                                    <p class="text-dark fs-5 fw-bold mb-0">Ksh 200 / kg</p>
                                                    <a href="#" class="btn border border-secondary rounded-pill px-3 text-primary"><i class="fa fa-shopping-bag me-2 text-primary"></i> View Description</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div> -->
                            </div>
                        </div>
                    </div>
                </div>
                <div id="tab-5" class="tab-pane fade show p-0">
                    <div class="row g-4">
                        <div class="col-lg-12">
                            <div class="row g-4" id="productHolder4">
                                <!-- <div class="col-md-6 col-lg-4 col-xl-3">
                                        <div class="rounded position-relative fruite-item">
                                            <div class="fruite-img">
                                                <img src="{% static 'img/fruite-item-3.jpg' %}" class="img-fluid w-100 rounded-top" alt="">
                                            </div>
                                            <div class="text-white bg-secondary px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px;">Fruits</div>
                                            <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                                                <h4>Banana</h4>
                                                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit sed do eiusmod te incididunt</p>
                                                <div class="d-flex justify-content-between flex-lg-wrap">
                                                    <p class="text-dark fs-5 fw-bold mb-0">$4.99 / kg</p>
                                                    <a href="#" class="btn border border-secondary rounded-pill px-3 text-primary"><i class="fa fa-shopping-bag me-2 text-primary"></i> Add to cart</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-lg-4 col-xl-3">
                                        <div class="rounded position-relative fruite-item">
                                            <div class="fruite-img">
                                                <img src="{% static 'img/fruite-item-2.jpg' %}" class="img-fluid w-100 rounded-top" alt="">
                                            </div>
                                            <div class="text-white bg-secondary px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px;">Fruits</div>
                                            <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                                                <h4>Raspberries</h4>
                                                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit sed do eiusmod te incididunt</p>
                                                <div class="d-flex justify-content-between flex-lg-wrap">
                                                    <p class="text-dark fs-5 fw-bold mb-0">$4.99 / kg</p>
                                                    <a href="#" class="btn border border-secondary rounded-pill px-3 text-primary"><i class="fa fa-shopping-bag me-2 text-primary"></i> Add to cart</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-lg-4 col-xl-3">
                                        <div class="rounded position-relative fruite-item">
                                            <div class="fruite-img">
                                                <img src="{% static 'img/fruite-item-1.jpg' %}" class="img-fluid w-100 rounded-top" alt="">
                                            </div>
                                            <div class="text-white bg-secondary px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px;">Fruits</div>
                                            <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                                                <h4>Oranges</h4>
                                                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit sed do eiusmod te incididunt</p>
                                                <div class="d-flex justify-content-between flex-lg-wrap">
                                                    <p class="text-dark fs-5 fw-bold mb-0">$4.99 / kg</p>
                                                    <a href="#" class="btn border border-secondary rounded-pill px-3 text-primary"><i class="fa fa-shopping-bag me-2 text-primary"></i> Add to cart</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Fruits Shop End-->


<!-- Featurs Start -->

<!-- Featurs End -->

<!-- Vegitable Shop Start-->
<!-- <div class="container-fluid vesitable py-5">
        <div class="container py-5">
            <h1 class="mb-0">Most sold products</h1>
            <div class="owl-carousel vegetable-carousel justify-content-center" id="productHolderC">
                
                
               
                
                
            </div>
        </div>
    </div> -->
<!-- Vesitable Shop End -->



<script type="module" src="{% static 'js/dashboard.js' %}"></script>
<!-- Bootstrap JS (required for modal functionality) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Chart JS -->

<!-- Mock API Data (Replace with actual API calls) -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Simulating API Data
        const bestSellingProducts = ["Tomatoes", "Onions", "Avocados"];
        const topBuyers = ["John Doe - Bulk Purchaser", "Green Grocers Ltd", "Mary’s Organic Farm"];
        const marketTrends = ["Tomatoes prices rising", "Avocados in high demand", "Onion supply dropping"];

        // Populate Best-Selling Products
        const bestSellingList = document.getElementById("bestSellingProducts");
        bestSellingList.innerHTML = bestSellingProducts.map(item => `<li class="list-group-item">${item}</li>`).join("");

        // Populate Top Buyers
        const topBuyersList = document.getElementById("topBuyers");
        topBuyersList.innerHTML = topBuyers.map(buyer => `<li class="list-group-item">${buyer}</li>`).join("");

        // Populate Market Trends
        const marketTrendsList = document.getElementById("marketTrends");
        marketTrendsList.innerHTML = marketTrends.map(trend => `<li class="list-group-item">${trend}</li>`).join("");
    });
</script>

<div class="col-md-12 mb-4">
    <div class="card">
        <div class="card-header">
            <h5 class="m-0">Market & Customer Insights</h5>
        </div>
        <div class="card-body">
            <!-- Navigation Tabs -->
            <ul class="nav nav-tabs" id="marketTabs" role="tablist">
                <li class="nav-item">
                    <button class="nav-link active" id="bestSelling-tab" data-bs-toggle="tab" data-bs-target="#bestSelling" type="button" role="tab">
                        Best-Selling Products
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="topBuyers-tab" data-bs-toggle="tab" data-bs-target="#topBuyers" type="button" role="tab">
                        Top Buyers
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="marketTrends-tab" data-bs-toggle="tab" data-bs-target="#marketTrends" type="button" role="tab">
                        Market Trends
                    </button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content mt-3" id="marketTabsContent">
                <!-- Best-Selling Products -->
                <div class="tab-pane fade show active" id="bestSelling" role="tabpanel">
                    <ul class="list-group" id="bestSellingProducts">
                        <li class="list-group-item">Loading...</li>
                    </ul>
                </div>

                <!-- Top Buyers -->
                <div class="tab-pane fade" id="topBuyers" role="tabpanel">
                    <ul class="list-group" id="topBuyersList">
                        <li class="list-group-item">Loading...</li>
                    </ul>
                </div>

                <!-- Market Prices & Demand -->
                <div class="tab-pane fade" id="marketTrends" role="tabpanel">
                    <ul class="list-group" id="marketTrendsList">
                        <li class="list-group-item">Fetching data...</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Mock API Data (Replace with real API calls) -->
<!-- Mock API Data (Replace with real API calls) -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Simulated API Data for Best-Selling Products with Peak Season
        const bestSellingProducts = [
            { name: "Tomatoes", season: "March 2025 - April 2025" },
            { name: "Onions", season: "July 2025 - September 2025" },
            { name: "Avocados", season: "May 2025 - June 2025" }
        ];

        // Simulated API Data for Top Buyers with Purchases
        const topBuyers = [
            { name: "John Doe", product: "Tomatoes", quantity: "500 kg", totalSpent: "Ksh 75,000" },
            { name: "Green Grocers Ltd", product: "Onions", quantity: "1,000 kg", totalSpent: "Ksh 120,000" },
            { name: "Mary’s Organic Farm", product: "Avocados", quantity: "300 kg", totalSpent: "Ksh 45,000" }
        ];

        // Simulated API Data for Market Trends with Time Aspect
        const marketTrends = [
            { trend: "Tomato prices expected to peak", time: "March 2025 - April 2025" },
            { trend: "Avocados in high demand for export", time: "May 2025 - June 2025" },
            { trend: "Onion prices dropping due to surplus", time: "July 2025 - September 2025" }
        ];

        // Ensure Elements Exist Before Updating
        const bestSellingList = document.getElementById("bestSellingProducts");
        const topBuyersList = document.getElementById("topBuyersList");
        const marketTrendsList = document.getElementById("marketTrendsList");

        if (bestSellingList) {
            bestSellingList.innerHTML = bestSellingProducts.map(item => 
                `<li class="list-group-item"><strong>${item.name}</strong><br>
                <small class="text-muted">Peak Season: ${item.season}</small></li>`
            ).join("");
        }

        if (topBuyersList) {
            topBuyersList.innerHTML = topBuyers.map(buyer => 
                `<li class="list-group-item"><strong>${buyer.name}</strong><br> 
                <small class="text-muted">Bought: ${buyer.quantity} of ${buyer.product}</small><br>
                <small class="text-muted">Total Spent: ${buyer.totalSpent}</small></li>`
            ).join("");
        }

        if (marketTrendsList) {
            marketTrendsList.innerHTML = marketTrends.map(trend => 
                `<li class="list-group-item"><strong>${trend.trend}</strong><br> 
                <small class="text-muted">Time: ${trend.time}</small></li>`
            ).join("");
        }
    });
</script>



{% endblock %}