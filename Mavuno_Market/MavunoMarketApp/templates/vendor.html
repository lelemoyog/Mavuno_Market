{% extends 'index.html' %}
{% load static %}
{% block title %}welcome{% endblock %}
{% block content %}

<style>
    .container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }
    .card {
        flex: 1 1 calc(25% - 20px);
        border: 1px solid #ccc;
        padding: 10px;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
        text-align: center;
        cursor: pointer;
        width: calc(25% - 0px);
        margin-bottom: 20px;
    }
    .card img {
        width: 100%;
        height: auto;
    }
    .card h3 {
        margin: 10px 0;
    }
    @media screen and (max-width: 768px) {
        .card {
            flex: 1 1 calc(50% - 20px);
        }
    }
    @media screen and (max-width: 480px) {
        .card {
            flex: 1 1 100%;
        }
    }
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
    }
    .modal-content {
        background: white;
        padding: 20px;
        border-radius: 5px;
        width: 80%;
        max-width: 500px;
    }
    .close {
        float: right;
        font-size: 1.5em;
        cursor: pointer;
    }
    .product-row {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 20px;
    }
    .product-item {
        flex: 1 1 calc(25% - 20px);
        border: 1px solid #ccc;
        padding: 10px;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
        text-align: center;
        cursor: pointer;
        width: calc(25% - 0px);
        margin-bottom: 20px;
    }
</style>

<div class="container" id="vendorContainer" style="padding-top: 200px;">
    <!-- Vendor cards will be displayed here -->
</div>

<div class="modal" id="orderModal">
    <div class="modal-content">
        <span class="close" id="modalClose">&times;</span>
        <h2 id="vendorName"></h2>
        <div id="orderList" class="product-list">
            <!-- List of orders will be displayed here -->
        </div>
    </div>
</div>

<script>
const vendors = [
    { id: 1, name: 'Vendor Alice', image: 'https://via.placeholder.com/150',
      orders: [
        { name: 'Apples', image: 'https://images.unsplash.com/photo-1536510335765-c6a5e2b3c2f4?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60' },
        { name: 'Oranges', image: 'https://images.unsplash.com/photo-1617633139516-fb7bbef34e16?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60' },
        { name: 'Bananas', image: 'https://images.unsplash.com/photo-1617633139516-fb7bbef34e16?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60' }
      ] },
    { id: 2, name: 'Vendor Bob', image: 'https://via.placeholder.com/150',
      orders: [
        { name: 'Carrots', image: 'https://via.placeholder.com/150' },
        { name: 'Potatoes', image: 'https://via.placeholder.com/150' },
        { name: 'Tomatoes', image: 'https://via.placeholder.com/150' }
      ] },
    { id: 3, name: 'Vendor Charlie', image: 'https://via.placeholder.com/150',
      orders: [
        { name: 'Lettuce', image: 'https://via.placeholder.com/150' },
        { name: 'Cabbage', image: 'https://via.placeholder.com/150' },
        { name: 'Spinach', image: 'https://via.placeholder.com/150' }
      ] },
    { id: 4, name: 'Vendor Dave', image: 'https://via.placeholder.com/150',
      orders: [
        { name: 'Peppers', image: 'https://via.placeholder.com/150' },
        { name: 'Onions', image: 'https://via.placeholder.com/150' },
        { name: 'Garlic', image: 'https://via.placeholder.com/150' }
      ] }
];

function populateVendors() {
    const vendorContainer = document.getElementById('vendorContainer');

    vendors.forEach(vendor => {
        const card = document.createElement('div');
        card.className = 'card';
        card.onclick = () => showVendorOrders(vendor);

        const img = document.createElement('img');
        img.src = vendor.image;
        img.alt = vendor.name;

        const name = document.createElement('h3');
        name.textContent = vendor.name;

        card.appendChild(img);
        card.appendChild(name);
        vendorContainer.appendChild(card);
    });
}

function showVendorOrders(vendor) {
    if (vendor && vendor.orders && vendor.orders.length > 0) {
        const modal = document.getElementById('orderModal');
        const vendorName = document.getElementById('vendorName');
        const orderList = document.getElementById('orderList');

        vendorName.textContent = vendor.name;
        orderList.innerHTML = '';

        let row = document.createElement('div');
        row.className = 'product-row';

        vendor.orders.forEach((order, index) => {
            const orderDiv = document.createElement('div');
            orderDiv.className = 'product-item';
            const orderImage = document.createElement('img');
            orderImage.src = order.image;
            orderImage.alt = order.name;
            orderDiv.appendChild(orderImage);

            const orderName = document.createElement('p');
            orderName.textContent = order.name;
            orderDiv.appendChild(orderName);

            row.appendChild(orderDiv);

            if ((index + 1) % 4 === 0) {
                orderList.appendChild(row);
                row = document.createElement('div');
                row.className = 'product-row';
            }
        });

        if (row.children.length > 0) {
            orderList.appendChild(row);
        }

        modal.style.display = 'flex';
    }
}

function closeModal() {
    document.getElementById('orderModal').style.display = 'none';
}

document.getElementById('modalClose').onclick = closeModal;
window.onclick = (event) => {
    if (event.target == document.getElementById('orderModal')) {
        closeModal();
    }
};

document.addEventListener('DOMContentLoaded', populateVendors);
</script>

{% endblock %}
